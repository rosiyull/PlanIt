<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PlanIt — Planner Harian</title>
  <!-- Tailwind via CDN + custom config (animasi) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: '#0ea5a4',
            high: '#ef4444',
            medium: '#f59e0b',
            low: '#10b981'
          },
          keyframes: {
            fadeIn: { '0%': { opacity: 0, transform: 'translateY(6px) scale(.98)' }, '100%': { opacity: 1, transform: 'translateY(0) scale(1)' } },
            fadeOut: { '0%': { opacity: 1, transform: 'translateY(0) scale(1)' }, '100%': { opacity: 0, transform: 'translateY(6px) scale(.98)' } },
            progressGrow: { '0%': { width: '0%' }, '100%': { width: '100%' } }
          },
          animation: {
            fadeIn: 'fadeIn 220ms ease-out',
            fadeOut: 'fadeOut 180ms ease-in',
            progressGrow: 'progressGrow 800ms ease-out'
          }
        }
      }
    }
  </script>

  <!-- icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" rel="stylesheet" />
  <!-- confetti lib -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <!-- custom styles -->
  <link rel="stylesheet" href="style.css" />
</head>
<body class="min-h-screen bg-gray-50 dark:bg-slate-900 text-slate-800 dark:text-slate-100 font-sans transition-colors">
  <div class="max-w-4xl mx-auto p-6">
    <header class="mb-6 flex items-start justify-between">
      <div>
        <h1 class="text-2xl font-bold flex items-center gap-3">
          <span class="inline-block w-9 h-9 bg-primary rounded-full flex items-center justify-center text-white"><i class="fa-solid fa-list-check"></i></span>
          PlanIt — Planner Harian
        </h1>
        <p class="text-sm text-slate-600 dark:text-slate-300 mt-1">Atur tugas harianmu.</p>
      </div>

      <!-- Dark mode toggle -->
      <div class="flex items-center gap-3">
        <label class="switch" for="themeToggle" aria-label="Toggle dark mode">
        <span class="sun"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g fill="#ffd43b"><circle r="5" cy="12" cx="12"></circle><path d="m21 13h-1a1 1 0 0 1 0-2h1a1 1 0 0 1 0 2zm-17 0h-1a1 1 0 0 1 0-2h1a1 1 0 0 1 0 2zm13.66-5.66a1 1 0 0 1 -.66-.29 1 1 0 0 1 0-1.41l.71-.71a1 1 0 1 1 1.41 1.41l-.71.71a1 1 0 0 1 -.75.29zm-12.02 12.02a1 1 0 0 1 -.71-.29 1 1 0 0 1 0-1.41l.71-.66a1 1 0 0 1 1.41 1.41l-.71.71a1 1 0 0 1 -.7.24zm6.36-14.36a1 1 0 0 1 -1-1v-1a1 1 0 0 1 2 0v1a1 1 0 0 1 -1 1zm0 17a1 1 0 0 1 -1-1v-1a1 1 0 0 1 2 0v1a1 1 0 0 1 -1 1zm-5.66-14.66a1 1 0 0 1 -.7-.29l-.71-.71a1 1 0 0 1 1.41-1.41l.71.71a1 1 0 0 1 0 1.41 1 1 0 0 1 -.71.29zm12.02 12.02a1 1 0 0 1 -.7-.29l-.66-.71a1 1 0 0 1 1.36-1.36l.71.71a1 1 0 0 1 0 1.41 1 1 0 0 1 -.71.24z"></path></g></svg></span>
        <span class="moon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="m223.5 32c-123.5 0-223.5 100.3-223.5 224s100 224 223.5 224c60.6 0 115.5-24.2 155.8-63.4 5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6-96.9 0-175.5-78.8-175.5-176 0-65.8 36-123.1 89.3-153.3 6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"></path></svg></span>   
        <input type="checkbox" class="input" id="themeToggle" />
        <span class="slider"></span>
      </label>
      </div>
    </header>

    <main class="grid grid-cols-1 md:grid-cols-3 gap-6">
       <!-- Form tambah tugas -->
      <section class="md:col-span-1 bg-white dark:bg-slate-800 p-4 rounded-2xl shadow">
        <h2 class="text-lg font-semibold mb-3">Tambah Kegiatan</h2>
        <form id="taskForm" class="space-y-3">
          <div>
            <label class="block text-sm mb-1">Nama Kegiatan</label>
            <input id="taskName" type="text" required class="w-full px-3 py-2 rounded-lg border focus:outline-none focus:ring-2 focus:ring-primary bg-transparent" />
          </div>
          <div>
            <label class="block text-sm mb-1">Waktu</label>
            <input id="taskTime" type="time" class="w-full px-3 py-2 rounded-lg border focus:outline-none focus:ring-2 focus:ring-primary bg-transparent" />
          </div>
          <div>
            <label class="block text-sm mb-1">Prioritas</label>
            <select id="taskPriority" class="hidden" aria-hidden="true">
              <option value="low">low</option>
              <option value="medium" selected>medium</option>
              <option value="high">high</option>
            </select>

            <div class="radio-inputs" role="radiogroup" aria-label="Prioritas">
              <label class="radio">
                <input type="radio" name="taskPriorityRad" value="low" />
                <div class="name">Rendah</div>
              </label>
              <label class="radio">
                <input type="radio" name="taskPriorityRad" value="medium" checked />
                <div class="name">Sedang</div>
              </label>
              <label class="radio">
                <input type="radio" name="taskPriorityRad" value="high" />
                <div class="name">Tinggi</div>
              </label>
            </div>
          </div>
          <div class="flex gap-2">
            <button type="submit" aria-label="Tambah tugas" class="flex-1 bg-primary text-white px-4 py-2 rounded-lg font-medium hover:scale-[1.02] transition-transform">Tambah</button>
            <button type="button" id="clearBtn" aria-label="Bersihkan form" class="px-4 py-2 rounded-lg border hover:bg-gray-100 dark:hover:bg-slate-700 transition">Bersihkan</button>
          </div>
        </form>
        <div id="motivation" class="mt-4 text-sm text-slate-600 dark:text-slate-300">Motivasi: Satu langkah kecil tiap hari.</div>
      </section>

      <!-- Daftar tugas -->
      <section class="md:col-span-2 bg-white dark:bg-slate-800 p-4 rounded-2xl shadow">
        <div class="flex items-center justify-between mb-4">
          <h2 class="text-lg font-semibold">Daftar Kegiatan Hari Ini</h2>
          <div class="flex items-center gap-2">
            <label class="text-sm mb-1">Urutkan : </label>
            <select id="sortBy" class="hidden" aria-hidden="true">
              <option value="time">time</option>
              <option value="priority">priority</option>
              <option value="created" selected>created</option>
            </select>
            <div class="radio-inputs w-48" role="radiogroup" aria-label="Sort">
              <label class="radio">
                <input type="radio" name="sortByRad" value="time" />
                <div class="name text-xs">Waktu</div>
              </label>
              <label class="radio">
                <input type="radio" name="sortByRad" value="priority" />
                <div class="name text-xs">Prioritas</div>
              </label>
              <label class="radio">
                <input type="radio" name="sortByRad" value="created" checked />
                <div class="name text-xs">Terbaru</div>
              </label>
            </div>
          </div>
        </div>

        <!-- Progress bar -->
        <div class="mb-4">
          <div class="flex items-center justify-between mb-1">
            <div class="text-sm font-medium">Progress</div>
            <div id="progressText" class="text-sm text-slate-500 dark:text-slate-400">0%</div>
          </div>
          <div class="w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2 overflow-hidden">
            <div id="progressBarInner" class="h-2 rounded-full bg-gradient-to-r from-primary to-indigo-500 transition-all" style="width:0%"></div>
          </div>
        </div>

        <div id="taskList" class="space-y-3"></div>
        <div id="emptyState" class="text-center text-slate-500 dark:text-slate-400 py-8">Belum ada tugas hari ini — tambahkan di sebelah kiri!</div>
      </section>
    </main>

    <!-- Modal Edit Task -->
  <div id="editModal" 
     class="fixed inset-0 bg-black/40 hidden items-center justify-center z-50"
     role="dialog"
     aria-modal="true"
     aria-labelledby="editModalTitle">
  <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-xl p-6 w-80 animate-fadeIn">
    <h3 id="editModalTitle" class="text-lg font-semibold mb-3">Edit Kegiatan</h3>
    <form id="editForm" class="space-y-3">
        <input type="hidden" id="editId" />
        <div>
          <label class="block text-sm mb-1">Nama</label>
          <input id="editName" type="text" required class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary bg-transparent" />
        </div>
        <div>
          <label class="block text-sm mb-1">Waktu</label>
          <input id="editTime" type="time" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary bg-transparent" />
        </div>
        <div>
          <label class="block text-sm mb-1">Prioritas</label>
          <select id="editPriority" class="hidden" aria-hidden="true">
            <option value="low">low</option>
            <option value="medium">medium</option>
            <option value="high">high</option>
          </select>
          <div class="radio-inputs" role="radiogroup" aria-label="Edit Prioritas">
            <label class="radio">
              <input type="radio" name="editPriorityRad" value="low" />
              <div class="name">Rendah</div>
            </label>
            <label class="radio">
              <input type="radio" name="editPriorityRad" value="medium" />
              <div class="name">Sedang</div>
            </label>
            <label class="radio">
              <input type="radio" name="editPriorityRad" value="high" />
              <div class="name">Tinggi</div>
            </label>
          </div>
        </div>
        <div class="flex gap-2">
          <button type="submit" class="flex-1 bg-primary text-white rounded-lg py-2">Simpan</button>
          <button type="button" id="cancelEdit" class="flex-1 border rounded-lg py-2">Batal</button>
        </div>
      </form>
    </div>
  </div>
  <div id="undoSnackbar" class="fixed bottom-6 left-1/2 -translate-x-1/2 bg-slate-800 dark:bg-slate-700 text-white px-6 py-3 rounded-lg shadow-xl hidden items-center gap-4 z-50 transition-all">
      <span>Form dikosongkan</span>
      <button id="undoBtn" class="text-primary font-medium hover:underline">UNDO</button>
  </div>
</div>
  <script>
    (function(){
      function syncSelectToRadios(selectId, radioName) {
        const select = document.getElementById(selectId);
        const radios = Array.from(document.querySelectorAll('input[name="'+radioName+'"]'));
        if (!select || radios.length === 0) return;

        radios.forEach(r => r.checked = (r.value === select.value));
        radios.forEach(r => r.addEventListener('change', () => {
          if (r.checked) select.value = r.value;
          const ev = new Event('change', { bubbles: true });
          select.dispatchEvent(ev);
        }));
        let last = select.value;
        setInterval(() => {
          if (select.value !== last) {
            last = select.value;
            radios.forEach(r => r.checked = (r.value === select.value));
          }
        }, 150);
      }

      document.addEventListener('DOMContentLoaded', function(){
        syncSelectToRadios('taskPriority', 'taskPriorityRad');
        syncSelectToRadios('editPriority', 'editPriorityRad');
        syncSelectToRadios('sortBy', 'sortByRad');
      });
    })();
  </script>
  <script src="script.js"></script>
</body>
</html>
